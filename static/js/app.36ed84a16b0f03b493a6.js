webpackJsonp([1],{"79VH":function(t,e){},GTtC:function(t,e){},HC4g:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("kV13"),o=a("4YfN"),s=a.n(o),i=a("kciL"),r={name:"App",data:function(){return{badgeText:""}},created:function(){if(window.localStorage.getItem("loginStatus")&&(this.mutationLogin(),this.mutationLoginname(window.localStorage.getItem("loginname")),this.mutationAccesstoken(window.localStorage.getItem("accesstoken")),this.mutationAuthorId(window.localStorage.getItem("author_id"))),this.isLogined){this.getUnreadmMsgCount();var t=this;window.setInterval(function(){t.getUnreadmMsgCount()},18e4)}},computed:s()({},Object(i.d)(["topics","isLogined"])),methods:s()({},Object(i.c)(["mutationLogin","mutationLoginname","mutationAccesstoken","mutationAuthorId"]),{getUnreadmMsgCount:function(){var t=this;this.$http.get("/message/count",{params:{accesstoken:this.$store.state.accesstoken}}).then(function(e){console.log(e.data.data),e.data&&e.data.success&&(t.badgeText=e.data.data)})},handleSelect:function(t,e){console.log(t,e),this.$router.push("/"+e)}})},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-container",[a("el-header",{staticStyle:{padding:"0"}},[a("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"topiclist/all"}},[t._v("CNode社区PC端")]),t._v(" "),a("el-menu-item",{attrs:{index:"msg"}},[t._v("消息中心\n          "),a("el-badge",{staticClass:"item",attrs:{value:t.badgeText}})],1),t._v(" "),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.isLogined,expression:"isLogined"}],attrs:{index:"create"}},[t._v("发表新话题")]),t._v(" "),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.isLogined,expression:"isLogined"}],attrs:{index:"center"}},[t._v("个人中心")]),t._v(" "),0==t.isLogined?a("el-menu-item",{attrs:{index:"login"}},[t._v("登录")]):a("el-menu-item",{attrs:{index:"logout"}},[t._v("退出")])],1)],1),t._v(" "),a("el-main",[a("router-view")],1)],1),t._v(" "),a("el-backtop",{attrs:{bottom:100}},[a("div",{staticStyle:{"{\n      height":"100%",width:"100%","background-color":"#f2f5f6","box-shadow":"0 0 6px rgba(0,0,0, .12)","text-align":"center","line-height":"40px",color:"#1989fa"}},[a("i",{staticClass:"el-icon-upload2"})])])],1)},staticRenderFns:[]};var l=a("C7Lr")(r,c,!1,function(t){a("xL+k")},null,null).exports,u=a("wUgx"),d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",[t._v(t._s(t.msg))]),t._v(" "),a("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),a("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),a("br"),t._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};a("C7Lr")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},d,!1,function(t){a("tGEK")},"data-v-d8ec41bc",null).exports;var p={name:"topiclist",props:["name"],data:function(){return{loading:!1,activename:"all",lists:[],page:1,limit:15}},computed:s()({},Object(i.d)(["topics"]),Object(i.b)(["getTopicDescByTab"])),methods:{sy:function(t){var e=this;if(1==this.page)this.$alert("当前已经是第一页了哦",{confirmButtonText:"确定",callback:function(t){e.$message({type:"success",message:"请你不要再点击我了~"})}});else{var a=this;this.page=this.page-1,this.$http.get("/topics",{params:{tab:this.name,page:this.page,limit:this.limit}}).then(function(t){console.log(t.data.data),a.lists=t.data.data})}},xy:function(){var t=this;this.page=this.page+1,this.$http.get("/topics",{params:{tab:this.name,page:this.page,limit:this.limit}}).then(function(e){console.log(e.data.data),t.lists=e.data.data})},toplic:function(t,e,a){this.$router.push("/topic/"+t.id)},errorHandler:function(){return!0},handleClick:function(t,e){console.log(t.name),this.$router.push("/topiclist/"+t.name)}},beforeRouteEnter:function(t,e,a){a(function(e){e.$http.get("/topics",{params:{tab:t.params.name,page:e.page,limit:e.limit}}).then(function(t){console.log(t.data.data),t.data.success&&(e.lists=t.data.data)})})},beforeRouteUpdate:function(t,e,a){var n=this;this.page=1,this.$http.get("/topics",{params:{tab:t.params.name,page:this.page,limit:this.limit}}).then(function(t){console.log(t.data.data),t.data.success&&(n.lists=t.data.data)}),a()}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClick},model:{value:t.activename,callback:function(e){t.activename=e},expression:"activename"}},t._l(t.topics,function(t,e){return a("el-tab-pane",{key:e,attrs:{name:t.name,label:t.desc}})}),1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.lists},on:{"row-click":t.toplic}},[a("el-table-column",{attrs:{width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return a("span",{},[a("el-avatar",{attrs:{shape:"square",size:40,src:e.row.author.avatar_url},on:{error:t.errorHandler}})],1)}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"visit_count",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("阅读数: "+t._s(e.row.visit_count))]),t._v(" "),a("p",[t._v("回复数: "+t._s(e.row.reply_count))]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.visit_count)+" / "+t._s(e.row.reply_count))])],1)])]}}])}),t._v(" "),"/topiclist/all"==t.$route.path||"/topiclist/good"==t.$route.path?a("el-table-column",{attrs:{width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.top?a("el-tag",{attrs:{type:"success",size:"medium"}},[t._v("置顶")]):e.row.good?a("el-tag",{attrs:{type:"success",size:"medium"}},[t._v("精华")]):"/topiclist/all"==t.$route.path||"/topiclist/good"==t.$route.path?a("el-tag",{attrs:{type:"success",size:"medium"}},[t._v(t._s(t.getTopicDescByTab(e.row.tab)))]):t._e()]}}],null,!1,1719494596)}):a("el-table-column",{attrs:{width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.top?a("el-tag",{attrs:{type:"success",size:"medium"}},[t._v("置顶")]):e.row.good?a("el-tag",{attrs:{type:"success",size:"medium"}},[t._v("精华")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"title",width:"1200"}})],1),t._v(" "),a("nav",{attrs:{"aria-label":"..."}},[a("ul",{staticClass:"pager"},[a("li",{class:1==t.page?"previous disabled":"previous",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.sy(e)}}},[t._m(0)]),t._v(" "),a("li",{staticClass:"next",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.xy(e)}}},[t._m(1)])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"#"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("←")]),this._v(" 上一页")])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"#"}},[this._v("下一页"),e("span",{attrs:{"aria-hidden":"true"}},[this._v("→")])])}]};var m=a("C7Lr")(p,h,!1,function(t){a("S8VO")},null,null).exports,v={name:"topic",props:["id"],data:function(){return{topic:null,replyContent:""}},computed:s()({},Object(i.d)(["isLogined"]),Object(i.b)(["getTopicDescByTab"])),methods:{addReply:function(t){this.$http.post("/topic/"+this.topic.id+"replies",{accesstoken:this.$store.state.accesstoken,content:this.replyContent}).then(function(t){})},collect:function(){if(0!=this.$store.state.isLogined){var t=this;this.$http.post("/topic_collect/collect",{accesstoken:this.$store.state.accesstoken,topic_id:this.topic.id}).then(function(e){console.log(e.data),e.data&&e.data.success&&(t.topic.is_collect=!0)})}else this.$message({message:"未登录,请先登录",type:"warning"})},decollect:function(){var t=this;this.$http.post("/topic_collect/de_collect",{accesstoken:this.$store.state.accesstoken,topic_id:this.topic.id}).then(function(e){console.log(e.data),e.data&&e.data.success&&(t.topic.is_collect=!1)})}},beforeRouteEnter:function(t,e,a){a(function(e){e.$http.get("/topic/"+t.params.id,{params:{accesstoken:e.$store.state.accesstoken}}).then(function(t){console.log(t.data.data),e.topic=t.data.data})})},beforeRouteUpdate:function(t,e,a){var n=this;this.$http.get("/topic/"+t.params.id,{params:{accesstoken:this.$store.state.accesstoken}}).then(function(t){console.log(t.data.data),n.topic=t.data.data})}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.topic?a("div",[a("el-container",[a("el-header",{attrs:{height:"140px"}},[a("h2",[t._v(t._s(t.topic.title))]),t._v(" "),a("div",[a("span",[t._v("\n          作者:\n          "),a("el-link",{attrs:{href:"#/user/"+t.topic.author.loginname,type:"info"}},[t._v(t._s(t.topic.author.loginname))])],1),t._v(" "),a("span",[t._v(t._s(t.topic.visit_count)+"次浏览")]),t._v(" "),a("span",[t._v("来自: "+t._s(t.getTopicDescByTab(t.topic.tab)))])]),t._v(" "),0==t.topic.is_collect?a("el-button",{attrs:{type:"success"},nativeOn:{click:function(e){return t.collect(e)}}},[t._v("收藏")]):a("el-button",{attrs:{type:"info",plain:""},nativeOn:{click:function(e){return t.decollect(e)}}},[t._v("取消收藏")]),t._v(" "),t.topic.author_id==t.$store.state.author_id?a("el-link",{attrs:{type:"info",href:"#/topic/"+t.topic.id+"/edit"}},[t._v("编辑")]):t._e()],1),t._v(" "),a("el-main",{domProps:{innerHTML:t._s(t.topic.content)}}),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("评论")])]),t._v(" "),t._l(t.topic.replies,function(e,n){return a("div",{key:n,staticClass:"text item"},[a("el-avatar",{attrs:{shape:"square",size:40,src:e.author.avatar_url}}),t._v(" "),a("el-link",{attrs:{type:"primary",href:"#/user/"+e.author.loginname}},[t._v(t._s(e.author.loginname))]),a("el-tag",[t._v(t._s(n+1)+"楼")]),t._v(" "),a("div",{staticStyle:{padding:"5px"},domProps:{innerHTML:t._s(e.content)}}),t._v(" "),a("div",{staticStyle:{float:"right","margin-top":"-80px"}},[a("i",{staticClass:"el-icon-star-off"}),t._v(t._s(e.ups.length))]),t._v(" "),a("el-divider")],1)})],2),t._v(" "),a("el-footer",{staticStyle:{height:"200px"}},[a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"回复评论"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.replyContent,callback:function(e){t.replyContent=e},expression:"replyContent"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.addReply(1)}}},[t._v("回复")])],1)],1)],1)],1)],1):t._e()},staticRenderFns:[]};var g=a("C7Lr")(v,f,!1,function(t){a("Zlx7")},"data-v-4feaf44f",null).exports,_={name:"login",data:function(){return{accesstoken:"",isShowToast:!1,toastText:""}},methods:s()({},Object(i.c)(["mutationLogin","mutationLoginname","mutationAccesstoken","mutationAuthorId"]),{dologin:function(){var t=this;this.$http.post("/accesstoken",{accesstoken:this.accesstoken}).then(function(e){t.mutationLogin(),t.mutationLoginname(e.data.loginname),t.mutationAccesstoken(t.accesstoken),t.mutationAuthorId(e.data.id),window.localStorage.setItem("loginStatus",!0),window.localStorage.setItem("loginname",e.data.loginname),window.localStorage.setItem("accesstoken",t.accesstoken),window.localStorage.setItem("author_id",e.data.id),t.$router.push("/user/"+e.data.loginname),t.$router.go(0)}).catch(function(e){console.log(e.response),t.isShowToast=!0,t.toastText=e.response.data.error_msg,t.$notify.error({title:"错误",message:e.response.data.error_msg})})}})},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[t._v("用户登录")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入访问令牌Access Token"},model:{value:t.accesstoken,callback:function(e){t.accesstoken=e},expression:"accesstoken"}},[a("template",{slot:"prepend"},[t._v("Access Token:")])],2),t._v(" "),a("div",[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"success"},nativeOn:{click:function(e){return t.dologin(e)}}},[t._v("登录")])],1),t._v(" "),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.isShowToast,expression:"isShowToast"}],attrs:{title:t.toastText,type:"error"}})],1)},staticRenderFns:[]};var k=a("C7Lr")(_,b,!1,function(t){a("bSaH")},"data-v-e4324fb4",null).exports,x={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var y=a("C7Lr")({name:"center",computed:{loginname:function(){return this.$store.state.loginname}},created:function(){this.$router.replace("/user/"+this.loginname)}},x,!1,function(t){a("y5gf")},null,null).exports,$={name:"user",props:["loginname"],data:function(){return{userinfo:null,collect_topics:null}},components:{},beforeRouteEnter:function(t,e,a){a(function(e){e.$http.get("/user/"+t.params.loginname).then(function(t){console.log(t.data),e.userinfo=t.data.data}),e.$http.get("/topic_collect/"+t.params.loginname).then(function(t){console.log(t.data),e.collect_topics=t.data.data})})},beforeRouteUpdate:function(t,e,a){var n=this;this.$http.get("/user/"+t.params.loginname).then(function(t){console.log(t.data),n.userinfo=t.data.data}),this.$http.get("/topic_collect/"+t.params.loginname).then(function(t){console.log(t.data),n.collect_topics=t.data.data}),a()}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.userinfo?a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-breadcrumb",{attrs:{separator:"/",replace:"true"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item")],1)],1),t._v(" "),a("div",{staticClass:"text item"},[t._v(t._s(t.userinfo.loginname))]),t._v(" "),a("div",{staticClass:"text item"},[a("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.userinfo.avatar_url}})],1),t._v(" "),a("div",{staticClass:"text item"},[t._v("用户积分："+t._s(t.userinfo.score))]),t._v(" "),t.collect_topics?a("div",{staticClass:"text item"},[a("a",{attrs:{href:"#/collect/"+t.loginname}},[t._v(t._s(t.collect_topics.length)+"个话题被收藏")])]):t._e(),t._v(" "),a("div",[a("a",{attrs:{href:"http://github.com/"+t.userinfo.githubUsername}},[t._v("@ "+t._s(t.userinfo.githubUsername))])])]),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("最近发表话题")])]),t._v(" "),t._l(t.userinfo.recent_topics,function(e,n){return a("div",{key:n,staticClass:"text item"},[a("el-link",{attrs:{type:"primary",href:"#/topic/"+e.id}},[t._v(t._s(e.title))]),t._v(" "),a("el-divider")],1)})],2),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("最近参与话题")])]),t._v(" "),t._l(t.userinfo.recent_replies,function(e,n){return a("div",{key:n,staticClass:"text item"},[a("el-link",{attrs:{type:"primary",href:"#/topic/"+e.id}},[t._v(t._s(e.title))]),t._v(" "),a("el-divider")],1)})],2)],1):t._e()},staticRenderFns:[]};var C=a("C7Lr")($,w,!1,function(t){a("Zvjm")},"data-v-0825fb0a",null).exports,L={name:"logout",data:function(){return{isShowMsg:!1}},created:function(){var t=this;if(0!=this.$store.state.isLogined){var e=this;this.$confirm("此操作将退出, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){window.localStorage.clear(),t.$store.commit("mutationLogout"),t.$router.push("/"),t.$router.go(0),e.$message({type:"success",message:"退出成功!"})}).catch(function(){e.$router.push("/"),t.$message({type:"info",message:"已取消退出"})})}else this.isShowMsg=!0}},S={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.isShowMsg?e("el-alert",{attrs:{title:"你还没有登录哦,请先登录哦",type:"error"}},[e("el-link",{attrs:{type:"primary",href:"#/login"}},[this._v("登录链接")])],1):this._e()],1)},staticRenderFns:[]};var T=a("C7Lr")(L,S,!1,function(t){a("HC4g")},null,null).exports,R={name:"msg",data:function(){return{tabPosition:"left",selectedTabIndex:0,hasReadMsg:null,hasNotReadMsg:null}},computed:s()({},Object(i.d)(["topics","isLogined"])),created:function(){if(0!=this.isLogined){var t=this;this.$http.get("/messages",{params:{accesstoken:this.$store.state.accesstoken}}).then(function(e){console.log(e.data),t.hasReadMsg=e.data.data.has_read_messages,t.hasNotReadMsg=e.data.data.hasnot_read_messages})}else this.$message.error("您还未登录")},methods:{markRead:function(t){var e=this;this.$http.post("/message/mark_one/"+t,{accesstoken:this.$store.state.accesstoken}).then(function(t){console.log(t.data),t.data&&t.data.success&&(console.log("标记已读成功"),e.$router.go(0))})},markAll:function(){var t=this;this.$http.post("/message/mark_all",{accesstoken:this.$store.state.accesstoken}).then(function(e){e.data&&e.data.success&&t.$router.go(0)})}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{attrs:{"tab-position":t.tabPosition}},[a("el-tab-pane",{attrs:{label:"未读消息"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("未读消息")]),t._v(" "),t.hasNotReadMsg&&t.hasNotReadMsg.length>0?a("el-button",{staticClass:"a",staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",href:""},on:{click:function(e){return e.preventDefault(),t.markAll(e)}}},[t._v("标记全部消息为已读")]):a("el-tag",[t._v("暂无未读消息")])],1),t._v(" "),t._l(t.hasNotReadMsg,function(e,n){return a("div",{key:n,staticClass:"text item"},[a("el-link",{attrs:{type:"primary",href:"/#/user/"+e.author.loginname}},[t._v(t._s(e.author.loginname))]),t._v("回复了你的\n          "),a("el-link",{attrs:{type:"info",href:"/#/topic/"+e.topic.id}},[t._v(t._s(e.topic.title))]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"10px 0"},attrs:{type:"success",plain:""},nativeOn:{click:function(a){return t.markRead(e.id)}}},[t._v("标记已读")]),t._v(" "),a("el-divider")],1)})],2)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"已读消息"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("已读消息")])]),t._v(" "),t._l(t.hasReadMsg,function(e,n){return a("div",{key:n,staticClass:"text item"},[a("el-link",{attrs:{type:"primary",href:"/#/user/"+e.author.loginname}},[t._v(t._s(e.author.loginname))]),t._v("回复了你的\n          "),a("el-link",{attrs:{type:"info",href:"/#/topic/"+e.topic.id}},[t._v(t._s(e.topic.title))]),t._v(" "),a("el-divider")],1)})],2)],1)],1)],1)},staticRenderFns:[]};var j=a("C7Lr")(R,E,!1,function(t){a("uKm/")},"data-v-0e6f11ed",null).exports,A=a("J4Ko"),M=(a("bZrT"),{name:"create",components:{mavonEditor:A.mavonEditor},data:function(){return{title:"",content:"",value:"请选择",list:["请选择","测试","分享","问答","招聘"],toolbars:{bold:!0,italic:!0,header:!0,underline:!0,mark:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}},methods:{uploadImg:function(t,e){console.log(t),console.log(e);var a=new FromData;a.append("smfile",e),axios.post("https://sm.ms/api/v2/upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){console.log(e),this.$refs.md.$img2Url(t,e.data.data.url)})},addContent:function(){this.$http.post("topics",{title:this.title,content:this.content,tab:"dev",accesstoken:this.$store.state.accesstoken}).then(function(){1==res.data.seccess&&that.$router.replace("/topic/"+res.data.topic_id)})}}}),I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.list,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1),t._v(" "),a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),a("mavon-editor",{attrs:{toolbars:t.toolbars},on:{imgAdd:t.uploadImg},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),a("div",[a("el-button",{attrs:{type:"success"},nativeOn:{click:function(e){return t.addContent(e)}}},[t._v("发表话题")])],1)],1)},staticRenderFns:[]};var F=a("C7Lr")(M,I,!1,function(t){a("jF5Y")},"data-v-420a6f51",null).exports,O={name:"collect",props:["loginname"],data:function(){return{collect_topics:null,page:1,limit:15}},beforeRouteEnter:function(t,e,a){a(function(t){t.$http.get("/topic_collect/"+t.loginname).then(function(e){console.log(e.data.data),t.collect_topics=e.data.data})})},beforeRouteUpdate:function(t,e,a){var n=this;this.$http.get("/topic_collect/"+loginname).then(function(t){console.log(t.data.data),n.collect_topics=t.data.data}),a()}},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.loginname)+"收藏的话题")])]),t._v(" "),t._l(t.collect_topics,function(e,n){return a("div",{key:n,staticClass:"text item"},[a("el-avatar",{attrs:{shape:"square",size:40,src:e.author.avatar_url}}),t._v(" "),a("el-link",{attrs:{type:"primary",href:"#/topic/"+e.id}},[t._v(t._s(e.title))]),t._v(" "),a("el-divider")],1)})],2)],1)},staticRenderFns:[]};var U=a("C7Lr")(O,H,!1,function(t){a("79VH")},"data-v-24586206",null).exports,z={name:"edit",props:["id"],data:function(){return{topic:{title:"",content:""},value:"测试",list:["请选择","分享","问答","招聘","客户端测试"],toolbars:{bold:!0,italic:!0,header:!0,underline:!0,mark:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}},components:{mavonEditor:A.mavonEditor},methods:{edittopic:function(){var t=this;this.$http.post("/topic/update",{topic_id:this.topic.id,title:this.topic.title,content:this.topic.content,accesstoken:this.$store.state.accesstoken,tab:"dev"}).then(function(e){t.$router.back()})}},beforeRouteEnter:function(t,e,a){a(function(e){e.$http.get("/topic/"+t.params.id).then(function(t){console.log(t.data),e.topic=t.data.data})})},beforeRouteUpdate:function(t,e,a){var n=this;vm.$http.get("/topic/"+t.params.id).then(function(t){console.log(t.data),n.topic=t.data.data}),a()}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.list,function(t){return a("el-option",{key:t.value,attrs:{label:t,value:t}})}),1),t._v(" "),a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:t.topic.title,callback:function(e){t.$set(t.topic,"title",e)},expression:"topic.title"}}),t._v(" "),a("mavon-editor",{attrs:{toolbars:t.toolbars},model:{value:t.topic.content,callback:function(e){t.$set(t.topic,"content",e)},expression:"topic.content"}}),t._v(" "),a("div",[a("el-button",{attrs:{type:"success"},nativeOn:{click:function(e){return t.edittopic(e)}}},[t._v("修改话题")])],1)],1)},staticRenderFns:[]};var N=a("C7Lr")(z,D,!1,function(t){a("XuAh")},"data-v-da29224c",null).exports;n.default.use(u.a);var B=new u.a({routes:[{path:"/",redirect:"/topiclist/all"},{path:"/topiclist/:name",name:"topiclist",component:m,props:!0},{path:"/topic/:id",name:"topic",component:g,props:!0},{path:"/login",name:"login",component:k},{path:"/center",name:"center",component:y},{path:"/user/:loginname",name:"user",component:C,props:!0},{path:"/logout",name:"logout",component:T},{path:"/create",name:"create",component:F},{path:"/msg",name:"msg",component:j},{path:"/collect/:loginname",name:"collect",component:U,props:!0},{path:"/topic/:id/edit",name:"edit",component:N,props:!0}]}),P=(a("GTtC"),a("bQIR")),V=a.n(P),Z=(a("gFLX"),{mutationLogin:function(t){t.isLogined=!0},mutationLoginname:function(t,e){t.loginname=e},mutationAccesstoken:function(t,e){t.accesstoken=e},mutationLogout:function(t){t.isLogined=!1,t.loginname="",t.accesstoken="",t.author_id=""},mutationAuthorId:function(t,e){t.author_id=e}}),q={};n.default.use(i.a);var K=new i.a.Store({state:{topics:[{name:"all",desc:"全部"},{name:"good",desc:"精华"},{name:"share",desc:"分享"},{name:"ask",desc:"问答"},{name:"job",desc:"招聘"},{name:"dev",desc:"测试"}],isLogined:!1,loginname:"",accesstoken:"",author_id:""},getters:{moreMenus:function(t){return t.isLogined?t.LoginedmoreMenus:t.unLoginedmoreMenus},getTopicDescByTab:function(t){return function(e){for(var a=0;a<t.topics.length;a++)if(t.topics[a].name==e)return t.topics[a].desc}}},mutations:Z,actions:q}),G=a("I29D"),X=a.n(G).a.create({baseURL:"https://cnodejs.org/api/v1"});n.default.prototype.$http=X,n.default.use(V.a),n.default.config.productionTip=!1,new n.default({el:"#app",router:B,store:K,components:{App:l},template:"<App/>"})},S8VO:function(t,e){},XuAh:function(t,e){},Zlx7:function(t,e){},Zvjm:function(t,e){},bSaH:function(t,e){},bZrT:function(t,e){},gFLX:function(t,e){},jF5Y:function(t,e){},tGEK:function(t,e){},"uKm/":function(t,e){},"xL+k":function(t,e){},y5gf:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.36ed84a16b0f03b493a6.js.map